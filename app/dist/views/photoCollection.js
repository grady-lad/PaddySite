define(["backbone","views/photo"],function(e,t){var n=e.View.extend({initialize:function(){this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"add",this.tester)},setUpNewRow:function(){var e=$('<div class="row illRow"></div>');return $(".app").append(e),e},renderB:function(){var e=this,n=0,r;e.collection&&e.collection.each(function(i){var s="#"+i.attributes.image.public_id,o=i.attributes.image.url,u=o.indexOf("upload");o=o.slice(0,u+6)+"/h_400"+o.slice(u+6),i.set({small_url:o});if(n===0||n%3===0)r=e.setUpNewRow();var a=new t({model:i});r.append(a.render().el),$(s).bind("load",function(){$(this).addClass("fadeIn")}),n++},e,function(){document.getElementsByClassName("loading").style.display="none"})},tester:function(e){var n=new t({model:e}),r=$(".illRow:last"),i=$(".illRow:last > div").size(),s;r.length>0&&i<=2?r.append(n.render().el):(s=this.setUpNewRow(),s.append(n.render().el))}});return n});