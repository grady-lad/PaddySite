define(["backbone","events","collections/photo","views/photoCollection"],function(e,t,n,r){var i=e.Router.extend({initialize:function(){var e=this;this._setupCollection(),t.on("router:navigate",function(t){e.navigate(t,{trigger:!0})})},routes:{gallery:"illustration",photo:"singleIll",imagepanel:"uploader"},_setupCollection:function(){var e=$("#intialContent").html();return e!=="[]"&&$(".app").append('<div class="loading"></div>'),this.collection=new n(JSON.parse(e)),this.collection},_renderView:function(e){$(".app").append(e.render().el)},renderViewIll:function(e){$(".app").html(e.render().el)},illustration:function(){$(".app").html("");var e=new r({collection:this.collection});e.renderB()},singleIll:function(e){"use strict";var t=this.collection,n=e.split("="),r=n[1],i=this.collection.findWhere({_id:r}),s=this.collection.indexOf(i),o=this.collection.getPrevUrl(s),u=this.collection.getNextUrl(s),a=this;i.set({nextUrl:u}),i.set({prevUrl:o}),require(["views/singleDetailView"],function(e){var n=new e({model:i,collection:t});a.renderViewIll(n),$(".singleIll").bind("load",function(){$(this).fadeTo("slow",1)})})},uploader:function(){var e=this;require(["views/uploadPanelView"],function(t){var n=new t({collection:e.collection})});var t=new r({collection:this.collection});t.renderB()}});return i});